---
title: "Name"
author: "Bernd Heesen"
date: "October 5th, 2021"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(tidyverse)
library(readr)
knitr::opts_chunk$set(echo = FALSE)
library(dygraphs)
gradethis::gradethis_setup()
flights_jan <- 
  nycflights13::flights %>% 
  dplyr::filter(month == 2)
path<-getwd()
path<-file.path(path, "data/flights-jan.csv")
#dir.create("data",  showWarnings = TRUE)
write_csv(flights_jan, path)
```


## Welcome

This is a demo tutorial. Compare it to the [source code](https://github.com/rstudio/learnr/tree/master/inst/tutorials/ex-setup-r/ex-setup-r.Rmd) that made it.

### Outline

This tutorial will help you set up your computer to use R. It is for you if you need to:

* Install R on your computer
* Install the RStudio IDE
* Install the `tidyverse` R package

You can skip this tutorial if you've already done these things.

### Is this tutorial for you?

Do you need to work through the tutorial? Take the quiz below to find out.


```{r quiz1, echo = FALSE}
question("Check all that you have NOT done:",
  answer("installed R on my computer", message = "* Install R"),
  answer("installed the RStudio IDE", message = "* Install RStudio IDE"),
  answer("installed the tidyverse R package", message = "* Install Packages"),
  answer("None of the above. I've done them all.", correct = TRUE, message = "You can skip this tutorial!"),
  type = "multiple",
  incorrect = "This tutorial is here to help! To get set up read:"
)
```
## Video

### How to include Video

![](https://www.youtube.com/watch?v=61v_f3RcgDM)

## Code chunk

### Exercise 

*Here's a simple exercise with an empty code chunk provided for entering the answer.*
exercise=TRUE are evaluated independent from prior exercises (no dependency).

Write the R code required to add two plus two:

```{r two-plus-two, exercise=TRUE}

```

### Exercise with prepopulated code

*Here's an exercise with some prepopulated code as well as `exercise.lines = 5` to provide a bit more initial room to work.*

Now write a function that adds any two numbers and then call it:

```{r add-function, exercise=TRUE, exercise.lines = 5}
add <- function() {
  
}
```

### Exercise with Hint & Solution

*Here's an exercise where the chunk is pre-evaulated via the `exercise.eval` option (so the user can see the default output we'd like them to customize). We also add a "hint" to the correct solution via the chunk immediate below labeled `print-limit-hint`.*

Additional options:
exercise.cap	Caption for exercise chunk (defaults to “Code”)
exercise.lines	Lines of code for exercise editor (default to size of code chunk).
exercise.timelimit	Number of seconds to limit execution time to (defaults to 30).
exercise.startover	Whether to include a “Start Over” button for the exercise.

exercise.checker	Function used to check exercise answers (e.g., gradethis::grade_learnr()).
exercise.blanks	Regular expression to find blanks requiring replacement in the exercise code. See Checking Blanks below.
exercise.error.check.code	A string containing R code to use for checking code when an exercise evaluation error occurs (e.g., “gradethis::grade_code()”).
exercise.completion	Whether to enable code completion in the exercise editor.
exercise.diagnostics	Whether to enable code diagnostics in the exercise editor.
exercise.warn_invisible	Whether to display an invisible result warning if the last value returned is invisible.
exercise.reveal_solution	Whether or not the solution should be revealed to the user (defaults to TRUE). See Hiding Solutions below.

The exercise.setup can be used prior to an exercise to prepare the data

```{r filter, exercise=TRUE, exercise.setup = "cars", echo=FALSE}
mtcars<-dplyr::filter(mtcars, wt > 2000)
```

Modify the following code to limit the number of rows printed to 5:

```{r cars, exercise=TRUE, exercise.eval=TRUE, exercise.timelimit = 60}
mtcars
```
```{r cars-hint}
<div id="cars-hint-1">
**Hint:** You may want to use the "head" function.
</div>
head(mtcars, n = ?)

```{r cars-hint-2}
head(mtcars, n = 5)
```
## Data Files

```{r read-flights, exercise=TRUE}
path
flights<-read_csv(path, show_col_types = FALSE)
```

## Quiz

*You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.*

Some questions to verify that you understand the purposes of various base and recommended R packages:

```{r quiz}
quiz(
  question("Which package contains functions for installing other R packages?",
    answer("base"),
    answer("tools"),
    answer("utils", correct = TRUE),
    answer("codetools")
  ),
  question("Which of the R packages listed below are used to create plots?",
    answer("lattice", correct = TRUE),
    answer("tools"),
    answer("stats"),
    answer("grid", correct = TRUE)
  )
)
```

## Graphs

Modify the dyOptions to customize the graph's appearance:

```{r dygraph-options, exercise=TRUE, exercise.eval=TRUE, fig.height=5.5}
dygraph(ldeaths) %>%
  dyOptions(fillGraph = FALSE, drawGrid = TRUE)
```

## Grading

* Submit `1+1` to receive a correct grade. (graded based on result)

```{r ex1, exercise = TRUE}

```

```{r ex1-solution}
1+1
```
 
```{r ex1-check}
grade_result(pass_if(~identical(.result, 2))
)
```

* Submit `1+1` to receive a correct grade (graded bases on code).

```{r ex2, exercise = TRUE}

```

```{r ex2-solution}
1+1
```
 
```{r ex2-code-check}
grade_code()
)
```

Additional options:
Custom Checking
If you need custom exercise checking logic that isn’t already provided grading packages like gradethis, then you may want to write your own exercise.checker function. This function is called on exercise submission whenever *-check or *-code-check chunks exist. When called, this function receives all the information that learnr knows about the exercise at the time of the checking, including the user_code, solution_code, check_code, exercise environments, and the last_value (if any). Checking can be performed at three different time points, so the values supplied can differ depending on the time point:

Before exercise evaluation, at this stage:
check_code contains *-code-check chunk code.
envir_result, evaluate_result, and last_value are all NULL.
During evaluation, when an error occurs:
check_code contains *-error-check chunk code.
last_value contains the error condition object.
After exercise evaluation, at this stage:
check_code contains *-check chunk code.
last_value contains the last printed value.
If, at any one of these stages, feedback should be provided, then exercise.checker should return an R list with, at the very least, a correct flag and feedback message:

Field	Description
message	Feedback message. Can be a plain character vector or can HTML produced via the htmltools package.
correct	TRUE/FALSE logical value indicating whether the submitted answer was correct.
type	Feedback type (visual presentation style). Can be “auto”, “success”, “info”, “warning”, “error”, or “custom”. Note that “custom” implies that the “message” field is custom HTML rather than a character vector.
location	Location for feedback (“append”, “prepend”, or “replace”).
Below is a rough sketch of how one might implement an exercise.checker function. Notice how the presence of envir_result may be used to determine which type of check is being done (i.e., code or result check).

See the table below for a full description of all the arguments supplied to exercise.checker.

Argument	Description
label	Label for exercise chunk.
user_code	R code submitted by the user.
solution_code	Code provided within the “-solution” chunk for the exercise.
check_code	Code provided within the “-check” chunk for the exercise.
envir_result	The R environment after the execution of the chunk.
evaluate_result	The return value from the evaluate::evaluate function.
envir_prep	A copy of the R environment before the execution of the chunk.
last_value	The last value of the evaluated chunk.
engine	The engine value of the evaluated chunk.
…	Unused (include for compatibility with parameters to be added in the future